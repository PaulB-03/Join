<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Join – Board</title>

  <link rel="shortcut icon" href="../assets/svg/join_logo.svg" type="image/x-icon" />

  <link rel="stylesheet" href="../styles/standard.css" />
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="../styles/colors.css" />
  <link rel="stylesheet" href="../styles/fonts.css" />
  <link rel="stylesheet" href="../styles/boardLayout.css" />
  <link rel="stylesheet" href="../styles/board.css" />
  <link rel="stylesheet" href="../styles/boardOverlay.css" />
  <link rel="stylesheet" href="../styles/boardMedia.css" />
  <link rel="stylesheet" href="../styles/addTask.css" />
  <link rel="stylesheet" href="../styles/subTasks.css" />
  <link rel="stylesheet" href="../styles/addTaskMedia.css" />

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "…",
      authDomain: "…",
      databaseURL: "https://join-1323-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "…",
      storageBucket: "…",
      messagingSenderId: "…",
      appId: "…",
    };
    firebase.initializeApp(firebaseConfig);
    window.rtdb = firebase.database();
  </script>
  <script src="../scripts/utilsAddTask.js" defer></script>
  <script src="../scripts/templates/addTaskTemplates.js" defer></script>
  <script src="../scripts/boardOverlay.js" defer></script>
  <script src="../scripts/dragAndDrop.js" defer></script>
  <script src="../scripts/board.js" defer></script>
  <script src="../scripts/boardUi.js" defer></script>
  <script src="../script.js" defer></script>
  <script src="../scripts/boardSearchbar.js" defer></script>
  <script src="../scripts/subTask.js" defer></script>
  <script src="../scripts/logIn.js" defer></script>
  <script src="../scripts/header.js" defer></script>

  <noscript>
    <style>
      .app {
        display: none;
      }
    </style>
    <div style="padding: 1rem; background: #fff3cd; color: #664d03">JavaScript ist deaktiviert. Bitte aktivieren, um das
      Board zu nutzen.</div>
  </noscript>
</head>

<body onload="sidebarHeaderInit()" id="body">
  <header id="header">
    <div class="header-content">
      <img src="../assets/svg/join_logo_small.svg" class="headerLogo" style="height: 39px" alt="Join Logo" />
      <h6>Kanban Projekt Management Tool</h6>
      <nav id="headerNav" class="header-nav">
        <a href="../html/help.html" class="help-link" aria-label="Help">
          <img class="helper" src="../assets/svg/help.svg" alt="Hilfe" />
        </a>

        <div id="userAvatar" class="header-avatar" title="Profil" onclick="toggleProfileMenu(event)"></div>

        <div id="guestAvatar" class="avatar-wrapper" title="Gast" onclick="toggleProfileMenu(event)">
          <img class="default" src="../assets/img/guest.png" alt="Gastprofil" />
          <img class="hover" src="../assets/img/guest-hover.png" alt="Gastprofil Hover" />
        </div>

        <div id="profileMenu" class="profile-menu" style="display: none">
          <a class="menu-item helpMobile" href="../html/help.html">Help</a>
          <a class="menu-item" href="../html/legalNotice.html">Legal Notice</a>
          <a class="menu-item" href="../html/privacyPolicy.html">Privacy Policy</a>
          <a class="menu-item" href="../index.html" onclick="logout()">Log Out</a>
        </div>
      </nav>
    </div>
  </header>

  <aside id="sidebar">
    <aside class="sidebar">
      <div class="sb-header">
        <img class="join-logo" src="../assets/svg/join_logo_white.svg" alt="Join Logo" />
      </div>
      <ul id="internalSidebar" class="nav-list">
        <li class="nav-item">
          <a class="nav-link" href="../html/summary.html">
            <span class="icon"><img src="../assets/svg/summary.svg" alt="Summary" /></span>
            <span>Summary</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../html/addTask.html">
            <span class="icon"><img src="../assets/svg/add_task.svg" alt="Add Task" /></span>
            <span>Add Task</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../html/board.html">
            <span class="icon"><img src="../assets/svg/board.svg" alt="Board" /></span>
            <span>Board</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../html/contacts.html">
            <span class="icon"><img src="../assets/svg/contacts.svg" alt="Contacts" /></span>
            <span>Contacts</span>
          </a>
        </li>
      </ul>
      <div class="sb-footer">
        <a href="../html/privacyPolicy.html">Privacy Policy</a>
        <a href="../html/legalNotice.html">Legal notice</a>
      </div>
    </aside>
  </aside>

  <div class="app">
    <div class="heading">
      <h1>Board</h1>
      <div class="controls">
        <div id="search-empty-state" class="empty-state d_none" role="status" aria-live="polite">Keine Ergebnisse
          gefunden.</div>
        <div class="search" role="search" aria-label="Find Task">
          <div class="search-icon"></div>
          <input type="search" oninput="processChanges()" id="taskSearchInput" name="taskSearch"
            placeholder="Find Task" />
        </div>
        <!-- <input class="search" type="search" oninput="processChanges()" id="taskSearchInput" name="taskSearch" placeholder="Find Task" /> -->
        <button type="button" id="openAddTask" class="btn btn-dark" aria-label="Add task">
          <span class="btn-text">Add task</span>
          <img src="../assets/svg/add.svg" alt="" class="icon-add" />
        </button>
      </div>
    </div>

    <section class="board-viewport" id="boardViewport" aria-label="Board-Viewport">
      <section class="board" id="board" aria-label="Kanban Board">
        <div class="column">
          <div class="col-head">
            <h5>To do</h5>
            <button class="add-card-btn" aria-label="Neue Karte hinzufügen"></button>
          </div>
          <div class="dropzone" id="todo">
            <div class="empty">No tasks To do</div>
          </div>
        </div>

        <div class="column">
          <div class="col-head">
            <h5>In progress</h5>
            <button class="add-card-btn" aria-label="Neue Karte hinzufügen"></button>
          </div>
          <div class="dropzone" id="in-progress">
            <div class="empty">No tasks In progress</div>
          </div>
        </div>

        <div class="column">
          <div class="col-head">
            <h5>Await feedback</h5>
            <button class="add-card-btn" aria-label="Neue Karte hinzufügen"></button>
          </div>
          <div class="dropzone" id="await-feedback">
            <div class="empty">No tasks Await feedback</div>
          </div>
        </div>

        <div class="column">
          <div class="col-head">
            <h5>Done</h5>
          </div>
          <div class="dropzone" id="done">
            <div class="empty">No tasks Done</div>
          </div>
        </div>
      </section>
    </section>
    <div id="taskDetailOverlay" class="task-overlay">
      <div class="task-modal" role="dialog" aria-modal="true" aria-labelledby="taskDetailTitle"
        onclick="event.stopPropagation()">
        <div class="overlay-close" id="taskDetailClose" aria-label="Close"></div>
        <div id="taskDetailContent"><!-- Inhalt wird per JS gerendert --></div>
      </div>
    </div>

    <div id="taskOverlay" class="overlay" aria-hidden="true">
      <div id="task-overlay-panel" class="task-overlay-panel" role="dialog" aria-modal="true"
        onclick="event.stopPropagation()">
        <div class="addTaskOverlayWrapper">
          <div class="overlay-close" id="closeTaskOverlay" aria-label="Close"></div>
          <h1>Add Task</h1>
          <form autocomplete="off" class="addTaskForm">
            <div class="divInputTitleDescriptionDueDate">
              <div class="inputFlexbox">
                <h6>Title<sub class="requiredAsterisk">*</sub></h6>
                <input class="input" id="titleInput" name="title" type="text" placeholder="Enter a title" />
              </div>
              <p id="titleError" class="addTaskErrors">This field is required</p>
              <div class="marginTop8 inputFlexbox">
                <h6>Description</h6>
                <div class="textarea-wrapper">
                  <textarea rows="5" class="description" id="descriptionInput" name="description"
                    placeholder="Enter description" required></textarea>
                  <div class="resize-handle"></div>
                </div>
              </div>
              <div class="inputFlexbox marginTop24">
                <h6>Due date<sub class="requiredAsterisk">*</sub></h6>
                <input type="date" id="date" class="dateIcon input" placeholder="dd/mm/yyyy" required />
              </div>
              <p id="dateError" class="addTaskErrors">This field is required</p>
            </div>
            <div class="divider"></div>
            <div class="addTaskFormRight">
              <div class="inputFlexbox">
                <h6>Priority</h6>
                <div class="prioDivsWrapper">
                  <div id="urgent" onclick="setPrioColor(0)" class="prioGrade">
                    <h6>Urgent</h6>
                    <img src="../assets/svg/double_arrow_red.svg" class="prioImage" alt="red" />
                  </div>
                  <div id="medium" onclick="setPrioColor(1)" class="prioGrade">
                    <h6>Medium</h6>
                    <img src="../assets/svg/double_lines.svg" class="prioImage" alt="orange" />
                  </div>
                  <div id="low" onclick="setPrioColor(2)" class="prioGrade">
                    <h6>Low</h6>
                    <img src="../assets/svg/double_arrow_down.svg" class="prioImage" alt="green" />
                  </div>
                </div>
              </div>
              <div class="inputFlexbox marginTop24">
                <h6>Assigned to</h6>
                <div id="assignedToDropdownContacts" class="dropdownField" tabindex="0">
                  <div class="dropdown-selected">
                    <input class="assignedToSearch" type="text" id="contactSearch" name="contactSearch"
                      placeholder="Select contacts to assign" />
                    <img src="../assets/svg/arrow_drop_down.svg" class="dropdownArrow" id="dropdown-arrow-contacts" />
                  </div>
                  <ul id="dropdown-list-contacts" class="addTaskContactsList"></ul>
                </div>
                <div id="assignedToInitials" style="display: none"></div>
              </div>
              <div class="inputFlexbox marginTop24" id="category">
                <h6>Category<sub class="requiredAsterisk">*</sub></h6>
                <div id="assignedToDropdownCategory" class="dropdownField" tabindex="0">
                  <div class="dropdown-selected" id="input-category">
                    <h6 id="categoryPlaceholder">Select task category</h6>
                    <img src="../assets/svg/arrow_drop_down.svg" class="dropdownArrow" id="dropdown-arrow-subtasks" />
                  </div>
                  <ul id="dropdown-list-category" class="addTaskCategoryList">
                    <li class="dropdown-item-category" onclick="saveSelectedCategory(event, 0)">
                      <label class="custom-checkbox">
                        Userstory
                        <input type="checkbox" id="category-userstory" name="category" value="Userstory" required />
                        <span style="display: none"></span>
                      </label>
                    </li>
                    <li class="dropdown-item-category" onclick="saveSelectedCategory(event, 1)">
                      <label class="custom-checkbox">
                        Technical Task
                        <input type="checkbox" id="category-technical" name="category" value="Technical Task"
                          required />
                        <span style="display: none"></span>
                      </label>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="inputFlexbox marginTop24" id="subtasks">
                <h6>Subtasks</h6>
                <div class="dropdown-subtasks" tabindex="0">
                  <input type="text" class="dropdown-selected input input-subtask" id="subtaskInput" name="subtask"
                    placeholder="Add a new subtask" />
                  <div class="subtask-images-container" style="display: none">
                    <img src="../assets/svg/subclose.svg" class="subtaskImages cancelSubtask" alt="Delete Subtask" />
                    <div class="divider1"></div>
                    <img src="../assets/svg/subcheck.svg" class="subtaskImages saveSubtask" alt="Save Subtask" />
                  </div>
                </div>
                <ul class="addedSubtaskWrapper"></ul>
              </div>
              <p class="hideDesktop"><sub class="requiredAsterisk">*</sub>This field is required</p>
            </div>
          </form>
          <div class="addTaskOverlayFooter">
            <p class="hideMobile"><sub class="requiredAsterisk">*</sub>This field is required</p>
            <div class="addOrClear">
              <div id="clear" class="btn-white clearBtn addOrClearBtn" onclick="clearTask()">
                <h6>Clear</h6>
                <img src="../assets/svg/cancel.svg" alt="" />
              </div>
              <button id="add" class="btn-dark addOrClearBtn" type="button" onclick="createTask(event)">
                Create task
                <img src="../assets/svg/check_2.svg" class="createTaskCheck" alt="" />
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="../scripts/clearTask.js"></script>
  <script src="../scripts/standardFunctions.js"></script>
  <script src="../scripts/dropDown.js" defer></script>
  <script src="../scripts/priority.js"></script>
  <script src="../scripts/addTaskUi.js"></script>
  <script src="../scripts/firefoxCalendar.js"></script>
  <script src="../scripts/addTask.js"></script>
  <div id="rotateWarning" class="rotate-warning">Please rotate your device to portrait mode.</div>
</body>

</html>